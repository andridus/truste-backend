/*!
 * Name: shotgun.js
 * License: MIT
 * Version: 3.1
 * URL: https://github.com/jgnewman/shotgun
 */
!function(t){"use strict";function n(t){return t[0]}function e(t){return t[t.length-1]}function r(t){return t.slice(0,t.length-1)}function i(){var t,n="",e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghiklmnopqrstuvwxyz";for(n+=(new Date).getTime(),m+=1,n+="-"+m+"-",9999999===m&&(m=999999),t=0;25>t;t+=1)n+=e[Math.floor(Math.random()*e.length)];return n}function o(t,n){var e,r=t.length,i=[];for(e=0;r>e;e+=1)i.push(n(t[e],e));return i}function u(t,n){var e,r,i={};for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r=n(t[e],e),r!==g&&(i[e]=r));return i}function f(){}function c(){}function s(t){return"_internal"===t.slice(0,9)}function a(t,n,e){function r(){}var o;if(n===v&&e)throw new Error("Attempt to subscribe to an internal event without first registering the event.");return o=i(),_[o]={},r.prototype={_dirEvents:_[o],_dirEventsKey:o,_parentDir:n,_dirName:t},new r}function l(t,e,r,i){var o=t._dirEvents;return e?(o[e].apply(null,r),!0):(u(o,function(t){t.apply(null,r)}),i?u(t,function(t,o){return"_"===n(o)?g:l(t,e,r,i)}):!0)}function d(){return/in/.test(t.document.readyState)?t.setTimeout(d,100):(E=!0,h.fire("docReady",[t]))}var p,v,h,y=y||null,m=999999,_={},g={},E=!1;p=new f,v=new c,h={fire:function(t,n,i){var u,f,c,a,d;return"string"==typeof n?(f=[],c=n):(f=n,c=i),s(t)?(t=t.slice(10),d=v):d=p,"*"===e(t)?(a=!0,u=r(r(t)).split("/")):u=t.split("/"),o(u,function(t){d=d[t]}),d?l(d,c,f,a):!1},listen:function(t,n,e){var r,u,f=e||i();return s(t)?(t=t.slice(10),u=v):u=p,r=t.split("/"),o(r,function(t){u[t]=u[t]||a(t,u,!0),u=u[t]}),u._dirEvents[f]=n,this.fire("_internal/newListener",[t,n,f]),f},registerInternal:function(){return o(arguments,function(t){var n=v,e=t.split("/");o(e,function(t){n[t]=n[t]||a(t,n,!1),n=n[t]})}),!0},remove:function(t,n){var e,r;return s(t)?(t=t.slice(10),r=v):r=p,e=t.split("/"),o(e,function(t){r=r[t]}),n?(delete r._dirEvents[n],this.fire("_internal/rmListener",[t,n]),!0):(delete _[r._dirEventsKey],delete r._parentDir[r._dirName],this.fire("_internal/rmEvent",[t]),!0)},attempt:function(t,n,e){var r,i,o;"function"==typeof t?(i=t,o=n):(r=t,i=n,o=e);try{i()}catch(u){r&&this.fire(r,[u,i],o),this.fire("_internal/tryError",[u,i],o)}},getEvents:function(){return p},getInternalEvents:function(){return v},docReady:function(n){this.listen("docReady",n),E&&n(t)}},h.registerInternal("newListener","rmEvent","rmListener","tryError"),"Window"===t.constructor.name&&d(),"function"==typeof define&&define.amd?define("shotgun",[],function(){return h}):"object"==typeof exports?y.exports=h:t.SHOTGUN=t.SG=h}(this);